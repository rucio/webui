# ⚠️ The SESSION_PASSWORD should never be inside your repository directly
# For local development, you should store it inside a `.env.local` gitignored file
# See https://nextjs.org/docs/basic-features/environment-variables#loading-environment-variables
# You can generate a random 32 character string at https://1password.com/password-generator/

[public]
NEXT_PUBLIC_WEBUI_HOST=https://localhost:3000

[nextauth]
# NextAuth configuration for OIDC authentication
# Generate NEXTAUTH_SECRET with: openssl rand -base64 32
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=YSeN2me3Po4GS0IdAvgr70dOX6w0lbazE+MCe05LQ44=
AUTH_SECRET=YSeN2me3Po4GS0IdAvgr70dOX6w0lbazE+MCe05LQ44=
NODE_TLS_REJECT_UNAUTHORIZED=0

[meta]
PROJECT_URL=https://atlas.cern/

[config]
ENABLE_USERPASS_LOGIN=true
RULE_ACTIVITY=User Subscriptions
LIST_DIDS_INITIAL_PATTERN=

[session]
SESSION_PASSWORD=2gyZ3GDw3LHZQKDhPmPDL3sjREVRXPr8
SESSION_COOKIE_NAME=rucio-webui-session
NODE_TLS_REJECT_UNAUTHORIZED=0

[gateway]
RUCIO_AUTH_HOST=https://rucio-devmaany.cern.ch:443
RUCIO_HOST=https://rucio-devmaany.cern.ch:443
PARAMS_ENCODING_ENABLED=false

[oidc]
OIDC_ENABLED=true
OIDC_PROVIDERS=cern

# ============================================
# CERN SSO OIDC Provider Configuration
# ============================================
# Register your application at: https://application-portal.web.cern.ch/
# Redirect URL: http://localhost:3000/api/auth/callback/cern (for development)
#               https://your-domain.com/api/auth/callback/cern (for production)
# Required Scopes: openid, profile, email
# Audience: rucio (required by Rucio server)
# ============================================
OIDC_PROVIDER_CERN_CLIENT_ID=atlas-rucio-webui
OIDC_PROVIDER_CERN_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OIDC_PROVIDER_CERN_AUTHORIZATION_URL=https://auth.cern.ch/auth/realms/cern/protocol/openid-connect/auth
OIDC_PROVIDER_CERN_TOKEN_URL=https://auth.cern.ch/auth/realms/cern/protocol/openid-connect/token
OIDC_PROVIDER_CERN_REDIRECT_URL=http://localhost:3000/api/auth/callback/cern
OIDC_PROVIDER_CERN_USERINFO_URL=https://auth.cern.ch/auth/realms/cern/protocol/openid-connect/userinfo
OIDC_PROVIDER_CERN_SCOPES=openid,profile,email
# Optional: Icon URL for the login button
# OIDC_PROVIDER_CERN_ICON_URL=https://example.com/cern-logo.png

# ============================================
# Example: Indigo-IAM OIDC Provider (Commented)
# ============================================
# OIDC_PROVIDERS=cern,indigo
# OIDC_PROVIDER_INDIGO_CLIENT_ID=rucio-webui
# OIDC_PROVIDER_INDIGO_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# OIDC_PROVIDER_INDIGO_AUTHORIZATION_URL=https://iam.example.org/authorize
# OIDC_PROVIDER_INDIGO_TOKEN_URL=https://iam.example.org/token
# OIDC_PROVIDER_INDIGO_REDIRECT_URL=http://localhost:3000/api/auth/callback/indigo
# OIDC_PROVIDER_INDIGO_USERINFO_URL=https://iam.example.org/userinfo
# OIDC_PROVIDER_INDIGO_SCOPES=openid,profile,email

[multi_vo]
MULTIVO_ENABLED=true
VO_DEFAULT=def
VO_LIST=def,atl,ops,dtm

VO_DEF_NAME=Default
VO_DEF_LOGO=https://rucio.cern.ch/static/img/rucio-log

VO_ATL_NAME=ATLAS
VO_ATL_LOGO=https://atlas.cern/wp-content/uploads/2018/11/ATLAS-Logo-1.png
VO_ATL_OIDC_ENABLED=true
VO_ATL_OIDC_PROVIDERS=cern

VO_DTM_NAME="Data Management"
VO_DTM_LOGO=https://rucio.cern.ch/static/img/rucio-log

VO_OPS_NAME="Operations"
VO_OPS_LOGO=https://rucio.cern.ch/static/img/rucio-logo.png
VO_OPS_OIDC_ENABLED=true
VO_OPS_OIDC_PROVIDERS=twitter
