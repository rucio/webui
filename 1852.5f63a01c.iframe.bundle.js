"use strict";(self.webpackChunkrucio_webui=self.webpackChunkrucio_webui||[]).push([[1852],{"./src/lib/core/entity/rucio.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ik:()=>LockState,N0:()=>RuleNotification,b9:()=>DIDType,cp:()=>ReplicaState,jG:()=>DIDAvailability,jc:()=>SubscriptionState,mi:()=>RSEType,pJ:()=>RuleState});var DIDAvailability=function(DIDAvailability){return DIDAvailability.AVAILABLE="Available",DIDAvailability.DELETED="Deleted",DIDAvailability.LOST="Lost",DIDAvailability.UNKNOWN="Unknown",DIDAvailability}({}),LockState=function(LockState){return LockState.REPLICATING="R",LockState.OK="O",LockState.STUCK="S",LockState.UNKNOWN="U",LockState}({}),RuleNotification=function(RuleNotification){return RuleNotification.Yes="Y",RuleNotification.No="N",RuleNotification.Close="C",RuleNotification.Progress="P",RuleNotification}({}),DIDType=function(DIDType){return DIDType.DATASET="Dataset",DIDType.CONTAINER="Container",DIDType.COLLECTION="Collection",DIDType.FILE="File",DIDType.ALL="All",DIDType.UNKNOWN="Unknown",DIDType.DERIVED="Derived",DIDType}({}),RSEType=function(RSEType){return RSEType.DISK="DISK",RSEType.TAPE="TAPE",RSEType.UNKNOWN="UNKNOWN",RSEType}({}),ReplicaState=function(ReplicaState){return ReplicaState.AVAILABLE="Available",ReplicaState.UNAVAILABLE="Unavailable",ReplicaState.COPYING="Copying",ReplicaState.BEING_DELETED="Being_Deleted",ReplicaState.BAD="Bad",ReplicaState.TEMPORARY_UNAVAILABLE="Temporary_Unavailable",ReplicaState.UNKNOWN="Unknown",ReplicaState}({}),RuleState=function(RuleState){return RuleState.REPLICATING="Replicating",RuleState.OK="OK",RuleState.STUCK="Stuck",RuleState.SUSPENDED="Suspended",RuleState.WAITING_APPROVAL="Waiting_Approval",RuleState.INJECT="Inject",RuleState.UNKNOWN="Unknown",RuleState}({}),SubscriptionState=function(SubscriptionState){return SubscriptionState.ACTIVE="A",SubscriptionState.INACTIVE="I",SubscriptionState.NEW="N",SubscriptionState.UPDATED="U",SubscriptionState.BROKEN="B",SubscriptionState.UNKNOWN="UNKNOWN",SubscriptionState}({})},"./src/lib/infrastructure/hooks/useStreamReader.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FU:()=>StreamingErrorType,ZP:()=>useStreamReader,y0:()=>StreamingStatus});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),StreamingErrorType=function(StreamingErrorType){return StreamingErrorType.BAD_METHOD_CALL="bad_method_call",StreamingErrorType.NETWORK_ERROR="network_error",StreamingErrorType.BAD_REQUEST="bad_request",StreamingErrorType.NOT_FOUND="not_found",StreamingErrorType.INVALID_RESPONSE="invalid_response",StreamingErrorType.PARSING_ERROR="parsing_error",StreamingErrorType.UNKNOWN_ERROR="unknown_error",StreamingErrorType}({}),StreamingStatus=function(StreamingStatus){return StreamingStatus.STOPPED="stopped",StreamingStatus.RUNNING="running",StreamingStatus}({});function useStreamReader(){var _useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(StreamingStatus.STOPPED),status=_useState[0],setStatus=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0),error=_useState2[0],setError=_useState2[1],workerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return function(){workerRef.current&&(workerRef.current.terminate(),workerRef.current=null)}}),[]);var start=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(settings){if(workerRef.current)setError({type:StreamingErrorType.BAD_METHOD_CALL,message:"Another request is currently running."});else{setStatus(StreamingStatus.RUNNING),setError(void 0);var worker=new Worker("/streamWorker.js");workerRef.current=worker,worker.onmessage=function(event){var _event$data=event.data,type=_event$data.type,data=_event$data.data,error=_event$data.error;"data"===type?settings.onData(data):"error"===type?(setError(error),error.type!==StreamingErrorType.PARSING_ERROR&&stop()):"finish"===type&&stop()},worker.postMessage({url:settings.url,fetchOptions:settings.fetchOptions,updateDelay:settings.updateDelay,maxUpdateLength:settings.maxUpdateLength})}}),[]),stop=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){workerRef.current?(workerRef.current.terminate(),workerRef.current=null,setStatus(StreamingStatus.STOPPED)):setError({type:StreamingErrorType.BAD_METHOD_CALL,message:"There is no active fetching."})}),[]);return{stop,start,status,error}}},"./test/fixtures/table-fixtures.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A3:()=>fixtureDIDMetaViewModel,Fs:()=>mockUseComDOM,KF:()=>fixtureSubscriptionRuleStatesViewModel,Kh:()=>fixtureSubscriptionViewModel,Oc:()=>fixtureErrorViewModel,Pi:()=>fixtureRSEAccountUsageLimitViewModel,Q6:()=>fixtureDIDViewModel,TR:()=>fixtureRSEAccountUsageViewModel,Vl:()=>mockBaseVM,n1:()=>fixtureDIDLongViewModel,o0:()=>fixtureDIDKeyValuePair,qI:()=>fixtureRSEViewModel,rJ:()=>fixtureRuleViewModel,wM:()=>fixtureListDIDViewModel});var _home_runner_work_webui_webui_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@faker-js/faker/dist/esm/index.mjs"),_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/core/entity/rucio.ts");__webpack_require__("./src/lib/infrastructure/hooks/useStreamReader.ts");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_home_runner_work_webui_webui_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function mockUseComDOM(data){return{query:{data:{all:data,success:data.filter((function(d){return"success"===d.status})),error:data.filter((function(d){return"error"===d.status}))},fetchStatus:"idle"},start:function start(){},resume:function resume(){},pause:function pause(){}}}function mockBaseVM(fail){var setting=null!=fail?fail:"none";return{status:"none"===setting?"success":"some"===setting?_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.helpers.arrayElement(["success","error"]):"error",message:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3)}}function createRandomScope(){return"user.".concat(_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.person.firstName()).concat(_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.person.lastName())}function randomEnum(e){return _faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.helpers.arrayElement(Object.values(e))}function createRSEName(){return"RSE-"+_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.location.country().toUpperCase().replace(/\s/g,"-").replace(/[^a-zA-Z\d\s]/g,"")+"-"+_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({max:100})}function createRSEExpression(){return _faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.helpers.arrayElements([function(){return"type"},function(){return"tier"},function(){return"country"},function(){return"region"}],{min:1,max:4}).map((function(creator){return creator()})).join("&")}function fixtureDIDViewModel(){return _objectSpread(_objectSpread({},mockBaseVM()),{},{scope:createRandomScope(),name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3).replace(/\s/g,"."),did_type:randomEnum(_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9)})}function fixtureDIDLongViewModel(){return _objectSpread(_objectSpread({},mockBaseVM()),{},{scope:createRandomScope(),name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3).replace(/\s/g,"."),did_type:randomEnum(_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9),bytes:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e12}),length:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e6})})}function fixtureListDIDViewModel(){return _objectSpread(_objectSpread({},mockBaseVM()),{},{scope:createRandomScope(),name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3).replace(/\s/g,"."),did_type:randomEnum(_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9),bytes:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e12}),length:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e6}),open:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean()})}function fixtureRSEAccountUsageLimitViewModel(){var bytes_limit=_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e12}),used_bytes=_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e12});return _objectSpread(_objectSpread({},mockBaseVM()),{},{rse_id:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.uuid(),rse:createRSEName(),account:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.internet.userName(),files:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e6}),used_bytes,bytes_limit,bytes_remaining:bytes_limit-used_bytes,has_quota:bytes_limit>used_bytes,total_expected_usage:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e12})})}function fixtureRSEAccountUsageViewModel(){var bytes_limit=_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:1e6,max:1e9}),used_bytes=_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:1e6,max:1e9});return _objectSpread(_objectSpread({},mockBaseVM()),{},{rse_id:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.uuid(),rse:createRSEName(),account:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.internet.userName(),files:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e6}),used_bytes,bytes_limit})}function fixtureRSEViewModel(){return _objectSpread(_objectSpread({},mockBaseVM()),{},{id:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.uuid(),name:createRSEName(),rse_type:randomEnum(_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.mi),deterministic:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),volatile:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),staging_area:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean()})}function fixtureRuleViewModel(){return _objectSpread(_objectSpread({},mockBaseVM()),{},{id:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.uuid().replace(/-/g,""),scope:createRandomScope(),name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3).replace(/\s/g,"."),account:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.internet.userName(),rse_expression:createRSEExpression(),created_at:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.past().toISOString(),remaining_lifetime:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e6}),state:randomEnum(_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.pJ),locks_ok_cnt:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10}),locks_replicating_cnt:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10}),locks_stuck_cnt:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10})})}function fixtureDIDMetaViewModel(type){var did_type=null!=type?type:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.helpers.arrayElement([_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.CONTAINER,_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.DATASET,_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.FILE]);return _objectSpread(_objectSpread({},mockBaseVM()),{},{name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3).replace(/\s/g,"."),scope:createRandomScope(),account:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.internet.userName(),did_type,created_at:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.past().toISOString(),updated_at:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.recent().toISOString(),availability:randomEnum(_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.jG),obsolete:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),hidden:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),suppressed:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),purge_replicas:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),monotonic:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),is_open:did_type!==_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.FILE?_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean():null,adler32:did_type===_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.FILE?_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.hexadecimal({length:8,prefix:""}):null,guid:did_type===_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.FILE?_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.uuid():null,md5:did_type===_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.FILE?_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.hexadecimal({length:32,prefix:""}):null,bytes:did_type===_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.b9.FILE?_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e12}):null})}function fixtureDIDKeyValuePair(){return{key:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(2).replace(/\s/g,"-"),value:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.helpers.arrayElement(["das brot",_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.past().toISOString(),_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e6}),null])}}function fixtureSubscriptionRuleStatesViewModel(){return _objectSpread(_objectSpread({},mockBaseVM()),{},{name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3).replace(/\s/g,"."),state_ok:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10}),state_replicating:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10}),state_stuck:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10}),state_suspended:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10}),state_waiting_approval:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10}),state_inject:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:10})})}function fixtureSubscriptionViewModel(){return _objectSpread(_objectSpread({},mockBaseVM()),{},{account:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.internet.userName(),created_at:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.past().toISOString(),id:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.string.uuid(),last_processed:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.recent().toISOString(),lifetime:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.future().toISOString(),name:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(3).replace(/\s/g,"."),policyid:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:0,max:1e5}),retroactive:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean(),state:randomEnum(_lib_core_entity_rucio__WEBPACK_IMPORTED_MODULE_2__.jc),updated_at:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.date.recent().toISOString(),filter:JSON.stringify({scope:[createRandomScope()],project:[_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.commerce.productName()],split_rule:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.datatype.boolean()},void 0,2),replication_rules:JSON.stringify(Array.from({length:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.number.int({min:1,max:10})},(function(){return{activity:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.company.buzzPhrase(),rse_expression:createRSEExpression(),source_replica_expression:createRSEExpression(),copies:"*",lifetime:172800,comment:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.lorem.words(10)}})),void 0,2)})}function fixtureErrorViewModel(){return{message:_faker_js_faker__WEBPACK_IMPORTED_MODULE_1__.We.word.words(16),status:"error"}}}}]);